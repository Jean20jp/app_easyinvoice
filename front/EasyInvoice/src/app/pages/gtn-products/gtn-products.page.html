<ion-content>
  <div class="head">
    <div id="menu">
      <ion-menu-button></ion-menu-button>
    </div>
    <ion-text class="title">Gestión Productos</ion-text>
  </div>

  <div class="contentPage">
    <ion-grid>
      <ion-row>
        <ion-col>
          <ion-searchbar
            class="search"
            show-clear-button="focus"
            placeholder="Buscar.."
          ></ion-searchbar>
        </ion-col>
        <ion-col>
          <ion-button
            [disabled]="selectedItems.length === 0"
            (click)="vender()"
          >
          </ion-button>
        </ion-col>
      </ion-row>

      <ion-row>
        <ion-col> </ion-col>
      </ion-row>
    </ion-grid>

    <div>
      <ion-list>
        <ion-item-sliding *ngFor="let item of items" (press)="selectItem(item)">
          <ion-item
            class="itemProd"
            (click)="openModalDtProd()"
            [class.selected]="isSelected(item)"
          >
            <div class="imgIcon">
              <ion-img
                src="assets/icon/articulos-de-compra.png"
                slot="start"
              ></ion-img>
            </div>
            <ion-label>
              <h2>{{ item.name }}</h2>
              <p>{{ item.description }}</p>
            </ion-label>
          </ion-item>

          <ion-item-options side="start">
            <ion-item-option
              color="primary"
              expandable
              (click)="editItem(item)"
            >
              Editar
            </ion-item-option>
          </ion-item-options>

          <ion-item-options side="end">
            <ion-item-option
              color="danger"
              expandable
              (click)="deleteItem(item)"
            >
              Eliminar
            </ion-item-option>
          </ion-item-options>
        </ion-item-sliding>
      </ion-list>
    </div>
  </div>

  <ion-fab slot="fixed" horizontal="end" vertical="bottom">
    <ion-fab-button class="btnFab" (click)="addProducts()">
      <ion-icon name="add"></ion-icon>
    </ion-fab-button>
  </ion-fab>

  <div>
    <ion-modal #modalDtProd [showBackdrop]="showBackdrop">
      <ng-template>
        <ion-content>
          <div class="modal">
            <div class="headModal">
              <ion-text class="titleModal"> Producto </ion-text>
            </div>

            <div class="icon-modal">
              <ion-img src="assets/icon/icon_art_com_modal.png"></ion-img>
            </div>

            <div class="content">
              <ion-grid class="gridContent">
                <ion-row>
                  <ion-col>
                    <ion-text>Codigo{{codigo_barras}}</ion-text>
                  </ion-col>
                </ion-row>
                <ion-row>
                  <ion-col>
                    <ion-text>Nombre{{nom_producto}}</ion-text>
                  </ion-col>
                </ion-row>
                <ion-row>
                  <ion-col>
                    <ion-text>Descripcion{{descrip_prod}}</ion-text>
                  </ion-col>
                </ion-row>
                <ion-row>
                  <ion-col>
                    <ion-text>Promocion{{id_prom_pro}}</ion-text>
                  </ion-col>
                </ion-row>
                <ion-row>
                  <ion-col>
                    <ion-text>Categoria{{id_cat_pro}}</ion-text>
                  </ion-col>
                </ion-row>
                <ion-row>
                  <ion-col>
                    <ion-text>Unidades disponibles{{unidades_dispon}}</ion-text>
                  </ion-col>
                </ion-row>
                <ion-row>
                  <ion-col>
                    <ion-text>Precio{{precio}}</ion-text>
                  </ion-col>
                </ion-row>
              </ion-grid>
              <ion-item class="inputCant">
                <ion-input
                  label="Cantidad"
                  type="number"
                  placeholder="000"
                  min="0"
                  pattern="^[0-9]+$"
                ></ion-input>
              </ion-item>
              <ion-button class="btnModal"> Vender </ion-button>
            </div>
          </div>
        </ion-content>
      </ng-template>
    </ion-modal>
  </div>

  <div>
    <ion-modal class="modalForm" #modalForm>
      <ng-template>
        <ion-content>
          <div class="modalContentForm">
            <div class="headModal">
              <div>
                <ion-icon
                  class="iconBack"
                  name="chevron-back-outline"
                  (click)="goBack()"
                ></ion-icon>
              </div>
              <ion-text class="titleModal">{{titleModalForm}}</ion-text>
            </div>

            <div>
              <ion-grid>
                <ion-row>
                  <ion-col>
                    <ion-item class="inputBig" style="margin-top: 20px;">
                      <ion-input
                        clearInput
                        [(ngModel)]="codigo_barras"
                        type="text"
                        placeholder="Código del producto"
                      ></ion-input>
                    </ion-item>
                  </ion-col>
                </ion-row>
                <ion-row>
                  <ion-col>
                    <ion-item class="inputBig">
                      <ion-input
                        clearInput
                        [(ngModel)]="nom_producto"
                        type="text"
                        placeholder="Nombre del producto"
                      ></ion-input>
                    </ion-item>
                  </ion-col>
                </ion-row>
                <ion-row>
                  <ion-col>
                    <ion-item class="inputBig">
                      <ion-input
                        clearInput
                        [(ngModel)]="descrip_prod"
                        type="text"
                        placeholder="Descripción del producto"
                      ></ion-input>
                    </ion-item>
                  </ion-col>
                </ion-row>
                <ion-row>
                  <ion-col>
                    <ion-item class="inputSmall">
                      <ion-input
                        clearInput
                        [(ngModel)]="precio"
                        type="numeric"
                        placeholder="Precio"
                      ></ion-input>
                    </ion-item>
                  </ion-col>
                  <ion-col>
                    <ion-item class="inputNum">
                      <ion-input
                        type="number"
                        placeholder="Unidades"
                        min="0"
                        pattern="^[0-9]+$"
                      ></ion-input>
                    </ion-item>
                  </ion-col>
                </ion-row>
                <ion-row>
                  <ion-col>
                    <ion-item class="inputSelectSmall">
                      <ion-select
                        interface="popover"
                        placeholder="Categoría"
                        style="margin-top: -10px; margin-bottom: -10px"
                        [(ngModel)]="selectedOption"
                      >
                        <ion-select-option
                          *ngFor="let option of optionsCateg"
                          [value]="option"
                          >{{option}}</ion-select-option
                        >
                      </ion-select>
                      <ion-icon
                        name="close-circle"
                        (click)="clearSelection()"
                        *ngIf="selectedOption"
                      ></ion-icon>
                    </ion-item>
                  </ion-col>
                  <ion-col>
                    <ion-icon class="iconAdd" name="add-outline"></ion-icon>
                  </ion-col>
                </ion-row>
                <ion-row style="margin-top: 10px">
                  <ion-col>
                    <ion-item class="inputSelectSmall">
                      <ion-select
                        interface="popover"
                        placeholder="IVA"
                        style="margin-top: -10px; margin-bottom: -10px"
                        [(ngModel)]="selectedOption"
                      >
                        <ion-select-option
                          *ngFor="let option of optionsIva"
                          [value]="option"
                          >{{option}}</ion-select-option
                        >
                      </ion-select>
                      <ion-icon
                        name="close-circle"
                        (click)="clearSelection()"
                        *ngIf="selectedOption"
                      ></ion-icon>
                    </ion-item>
                  </ion-col>
                  <ion-col>
                    <ion-icon class="iconAdd" name="add-outline"></ion-icon>
                  </ion-col>
                </ion-row>
                <ion-row style="margin-top: 10px">
                  <ion-col>
                    <ion-item class="inputSelectSmall">
                      <ion-select
                        interface="popover"
                        placeholder="Promoción"
                        style="margin-top: -10px; margin-bottom: -10px"
                        [(ngModel)]="selectedOption"
                      >
                        <ion-select-option
                          *ngFor="let option of optionsProm"
                          [value]="option"
                          >{{option}}</ion-select-option
                        >
                      </ion-select>
                      <ion-icon
                        name="close-circle"
                        (click)="clearSelection()"
                        *ngIf="selectedOption"
                      ></ion-icon>
                    </ion-item>
                  </ion-col>
                  <ion-col>
                    <ion-icon class="iconAdd" name="add-outline"></ion-icon>
                  </ion-col>
                </ion-row>
                <ion-row>
                  <ion-col>
                    <ion-button class="btnVender">{{nameBtnModalForm}} </ion-button>
                  </ion-col>
                </ion-row>
              </ion-grid>
            </div>
          </div>
        </ion-content>
      </ng-template>
    </ion-modal>
  </div>
</ion-content>
